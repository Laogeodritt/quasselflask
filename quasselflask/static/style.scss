/******************************************************************************
 * File: style.css - Main stylesheet
 * QuasselFlask - Log Search Utility for Quassel Postgresql Database
 * https://github.com/Laogeodritt/quasselflask
 *
 * Licensed under the GNU Public Licence, version 3
 * <https://www.gnu.org/licenses/gpl-3.0.en.html>
 *****************************************************************************/

$base03:    #002b36;
$base02:    #073642;
$base01:    #586e75;
$base00:    #657b83;
$base0:     #839496;
$base1:     #93a1a1;
$base2:     #eee8d5;
$base3:     #fdf6e3;
$yellow:    #b58900;
$orange:    #cb4b16;
$red:       #dc322f;
$magenta:   #d33682;
$violet:    #6c71c4;
$blue:      #268bd2;
$cyan:      #2aa198;
$green:     #859900;

$content-border-radius: 10px;
$small-font-size: 80%;
$large-font-size: 120%;
$bg-hover-transition: background-color 0.3s;
$bg-hover-amount: 10%;

@import 'https://fonts.googleapis.com/css?family=PT+Sans|PT+Serif';

@mixin rebase($rebase03,$rebase02,$rebase01,$rebase00,$rebase0,$rebase1,$rebase2,$rebase3)
{
  background-color: $rebase02;

  section, article, footer, aside { background-color: $rebase03; }

  color: $rebase0;

  input { color:$rebase0; }

  header h1, h1, h2, h3, h4, h5, h6 { border-color: $rebase0; }

  a, a:active, a:visited { color: $rebase1; }

  section#error, section#warning, section#notice {
    color: $rebase1;
  }

  form {
    input { background-color: $rebase03; }
  }

  code { background-color: $rebase02; }

  footer { color: $rebase01; border-color: $rebase0; }

  .result {
    table.irc-log {
      .timestamp {
        color: $rebase01 !important;
      }
      .mode, .join, .part,  .quit, .kick, .kill,
      .info, .daychange, .topic, .invite
      .netsplit_join, .netsplit_quit,
      .nick {
        td { color: $rebase01; }
      }
    }
  }

  table.userlist tr {
    border-bottom: 1px solid $rebase0;
  }
}

@mixin accentize($accent) {
  a, a:active, a:visited, code.url { color: $accent; }
  h1,h2,h3,h4,h5,h6 { color: $accent; }
}

@mixin link_button($bgcolor)
{
  display: inline-block;
  margin: 0 0.3em;
  padding: 0.3em 0.6em;
  background-color: $bgcolor;
  border: solid $bgcolor 1px;
  border-radius: $content-border-radius;
  transition: $bg-hover-transition;

  color: $base3;
  text-decoration: none;

  &:visited, &:hover, &:active {
    color: $base3;
    text-decoration: none;
  }

  &:hover, &:active {
    background-color: lighten($bgcolor, $bg-hover-amount);
  }
}

@mixin button_color($bgcolor)
{
  background-color: $bgcolor;
  border: solid $bgcolor 1px;
  color: $base3;
  transition: $bg-hover-transition;

  &:hover, &:active {
    background-color: lighten($bgcolor, $bg-hover-amount);
  }
}

html, .light {
  @include rebase($base3,$base2,$base1,$base0,$base00,$base01,$base02,$base03)
}

.dark {
  @include rebase($base02,$base03,$base01,$base00,$base0,$base1,$base2,$base3)
}

body {
  max-width: 1156px;
  padding: 3em 4em 6em;
  margin-left: auto;
  margin-right: auto;
  font-family: 'PT Sans', sans-serif;
}

header h1, h1, h2, h3, h4, h5, h6 {
  color: $blue;
  font-family: 'PT Serif', serif;
  font-weight: normal;
  border-bottom: 1px solid;
  margin-top: 0.4em;
  margin-bottom: 0.8em;
  padding: 0 0.5em;
}

section {
  border: 1px solid;
  border-radius: $content-border-radius;
  margin-top: 0.8em;
  margin-bottom: 1.5em;
  padding: 0.7em 1.5em 1.5em 1.5em;
}

section#error {
  background-color: lighten($red, 25%);
}

section#warning {
  background-color: lighten($yellow, 25%);
}

section#notice {
  background-color: lighten($cyan, 25%);
}

footer {
  @extend section;
  font-size: $small-font-size;
  font-style: italic;
  text-align: center;
}

aside, article { @extend section; }

/** General elements **/
.links-bar {
  float: right;
  padding: 0;
  margin: 0.5em 0 1em 0;
}

.links-bar a {
  @include link_button($blue);
}

.links-bar a, .links-bar a:visited, .links-bar a:hover, .links-bar a:active {
  color: $base3;
  text-decoration: none;
}

.links-bar a:hover, .links-bar a:active {
  background-color: lighten($violet, $bg-hover-amount);
}

/** Form styling **/

form {
  display: flex;
  flex-direction: column;
  align-items: flex-end;

  &#form-login {
    .forgot-password {
      font-size: $small-font-size;
    }
  }

  &.narrow {
    width: 33%;
    margin-left: auto;
    margin-right: auto;

    > div {
      justify-content: space-between;
    }
  }

  > div {
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: baseline;
  }

  input, button {
    border: 1px solid;
    border-radius: $content-border-radius;
    margin: 0.6em 0.4em 0;
    padding: 0.3em 0.6em;
  }

  label, input[type="checkbox"], input[type="radio"] {
    margin: 0.6em 0.2em 0;
    padding: 0;
  }

  input[type="text"], input[type="password"], input[type="number"], input[type="textarea"] {
    flex-grow: 1;
    text-align: center;
  }

  input[type="text"], input[type="number"] { text-align: center; }

  > div.has-error input {
    border-color: $red;
    background-color: lighten($red, 30%)
  }

  .help-block {
    margin: 0.2em 0.4em 0;
    color: $red;
    font-size: $small-font-size;
  }

  #search-query {
    text-align: left;
  }

  button, input[type="submit"] {
    @include button_color($blue);
  }

  button[type="reset"], input[type="reset"] {
    @include button_color($violet);
  }

  #search-maxlines { max-width: 4em; }
}

/** Results styling **/
html .result {
  table.irc-log {
    margin: 0.3em 0 1em;

    td {
      vertical-align: baseline;
      padding: 0.11em 0.2em;
    }

    .timestamp {
      text-align: left;
      white-space: nowrap;
      font-size: $small-font-size;
      font-style: normal;
      font-weight: normal;
      &:before { content: '['; }
      &:after { content: ']'; }
    }
    .icon {
      text-align: center;
    }
    .sender {
      text-align: right;
      white-space: nowrap;

      &.nick-yellow { color: $yellow; }
      &.nick-orange { color: $orange; }
      &.nick-red { color: $red; }
      &.nick-magenta { color: $magenta; }
      &.nick-violet { color: $violet; }
      &.nick-blue { color: $blue; }
      &.nick-cyan { color: $cyan; }
      &.nick-green { color: $green; }
    }
    .message {
      text-align: left;
      white-space: normal;

      .irc-bold { font-weight: bold; }
      .irc-italic { font-style: italic; }
      .irc-underline { text-decoration: underline; }

      .irc-color00 { color: $base3; }
      .irc-color01 { color: $base03; }
      .irc-color02 { color: $base02; }
      .irc-color03 { color: $green; }
      .irc-color04 { color: $red; }
      .irc-color05 { color: $base01; }
      .irc-color06 { color: $violet; }
      .irc-color07 { color: $orange; }
      .irc-color08 { color: $yellow; }
      .irc-color09 { color: lighten($green, 10%); }
      .irc-color10 { color: $cyan; }
      .irc-color11 { color: lighten($cyan, 10%); }
      .irc-color12 { color: $blue }
      .irc-color13 { color: $magenta; }
      .irc-color14 { color: $base00; }
      .irc-color15 { color: $base1; }

      .irc-bgcolor00 { background-color: $base3; }
      .irc-bgcolor01 { background-color: $base03; }
      .irc-bgcolor02 { background-color: $base02; }
      .irc-bgcolor03 { background-color: $green; }
      .irc-bgcolor04 { background-color: $red; }
      .irc-bgcolor05 { background-color: $base01; }
      .irc-bgcolor06 { background-color: $violet; }
      .irc-bgcolor07 { background-color: $orange; }
      .irc-bgcolor08 { background-color: $yellow; }
      .irc-bgcolor09 { background-color: lighten($green, 10%); }
      .irc-bgcolor10 { background-color: $cyan; }
      .irc-bgcolor11 { background-color: lighten($cyan, 10%); }
      .irc-bgcolor12 { background-color: $blue }
      .irc-bgcolor13 { background-color: $magenta; }
      .irc-bgcolor14 { background-color: $base00; }
      .irc-bgcolor15 { background-color: $base1; }
    }


    /* different message classes */
    /* grey/deemph colour set by the light/dark rebase above */
    .privmsg {
      .sender {
        &:before { content: '<'; }
        &:after { content: '>'; }
      }
    }

    .notice, .server {
      td { color: $yellow; }
      .sender {
        &:before { content: '['; color: $yellow; }
        &:after { content: ']'; color: $yellow; }
      }
    }
    .action {
      font-style: italic;
    }
    .mode {
      td { color: $blue; }
      .message:before { content: 'Mode '; }
    }
    .join {
      .message:before { content: 'has joined channel '; }
    }
    .netsplit_join {
      .message:before { content: 'has joined channel '; }
      .message:after { content: ' (netsplit ended)'; }
    }
    .part {
      .message:before { content: ' has left ('; }
      .message:after { content: ')'; }
    }
    .quit {
      .message:before { content: 'has quit ('; }
      .message:after { content: ')'; }
    }
    .netsplit_quit {
      .message:before { content: 'has quit (netsplit: '; }
      .message:after { content: ')'; }
    }
    .kick {
      td { color: $violet; }
      .message:before { content: 'has kicked '; }
    }
    .kill {
      td { color: $violet; }
      .message:before { content: 'has killed '; }
    }
    .invite {
      .message:before { content: 'has invited '; }
      .message:after { content: ' to the channel'; }
    }
    .info, .daychange, .topic {
      /* color set by the light/dark rebase above */
    }
    .error {
      td { color: $red; }
    }
    .nick {
      /* color set by the light/dark rebase above */
    }
  }
}

/* Userlist styling */
.userlist-container {
  width: 60%;
  margin-left: auto;
  margin-right: auto;
  clear: both;
}

table.userlist {
  width: 100%;

  th {
    font-size: $large-font-size;
    font-weight: bold;
    text-align: center;
  }

  td {
    padding: 0.8em 0.6em;
  }

  .uid {
    text-align: right;
  }

  .email {
    .confirmed { color: $cyan; }
    .unconfirmed { color: $red; text-decoration: none; }
  }

  .actions {
    text-align: center;
  }

  form.linkform {
    display: inline-block;
    vertical-align: middle;
    margin: 0  0.2em;
    padding: 0;

    input[type='submit'] {
      display: inline-block;

      &.user-enabled {
        @include button_color($cyan);
      }

      &.user-disabled {
        @include button_color($red);
      }
    }

    &.action-edit input[type='submit'] {
      @include button_color($violet);
    }
  }
}
